# Telegram кино-бот (Studio Ghibli API)

Бот получает данные о фильмах через Studio Ghibli API. Реализованы разные режимы работы:

- `/popular` — популярные фильмы
- `/top` — фильмы с лучшей оценкой
- `/search <запрос>` — поиск фильма
- `/movie <id>` — подробности о фильме
- `/random` — случайный фильм
- `/ping` — проверка работы бота

## Установка

1. Установить зависимости:

```
pip install -r requirements.txt
```

2. Установить переменные окружения:

- `TELEGRAM_BOT_TOKEN` — токен бота Telegram
`$env:TELEGRAM_BOT_TOKEN = "8220934151:AAGs4vl2PKcKFUlhyVnH_kscLXv4HJ8EZ2Q"`

## Запуск

```
python main.py
```

## Обработка ошибок

В коде предусмотрена обработка:

- сетевых ошибок при запросах к API;
- некорректных команд или параметров.

## Структура проекта

- `main.py` — запуск и регистрация команд
- `handlers.py` — обработчики команд Telegram
- `api.py` — запросы к Studio Ghibli API
- `formatters.py` — форматирование карточек фильмов

## Архитектура

Поток обработки:

- Telegram → `handlers.py` (команда)
- `handlers.py` → `api.py` (получение данных)
- `handlers.py` → `formatters.py` (подготовка ответа)
- Ответ пользователю в Telegram

Функциональные слои:

- **Интерфейс**: обработчики команд `/popular`, `/top`, `/search`, `/movie`, `/random`
- **Доступ к данным**: `api.py` с единой точкой запросов к API
- **Бизнес-логика**: сортировка, фильтрация, выбор случайного фильма
- **Представление**: форматирование карточек в Markdown
